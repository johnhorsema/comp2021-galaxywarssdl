<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><title>COMP 2021 Galaxy Wars SDL - Final Report</title>
<style type="text/css" media="all">
body {
	margin: 0px 0px 0px 0px;
	padding: 0px 0px 0px 0px;
	font-family: "Lucida Sans Unicode", "Bitstream Vera Sans", "Trebuchet Unicode MS", "Lucida Grande", Verdana, Helvetica, sans-serif;
	color: #333;
	background-color: #333;
	}
a {
	text-decoration: none;
	font-weight: bold;
	color:  #ccc;
	outline: none;
	}
a:visited {
	color:  #ccc;
	}
a:active {
	color:  #ccc;
	}
a:hover {
	color: #ccc;
	text-decoration: underline;
	}
.ahem {
	display: none;
	}
strong, b {
	font-weight: bold;
	}
p {
	line-height: 22px;
	margin-top: 20px;
	margin-bottom: 10px; 
	}

.heading{
	font-size: 28px;
	line-height: 44px;
	font-weight: bold;
	background: #555;
	color: #fff;
	padding-left: 210px;
}
	
h1 {
	font-size: 24px;
	line-height: 44px;
	font-weight: bold;
	margin-top: 0;
	margin-bottom: 0;
	}
	
#cssmenu > h1{
	margin-left: 20px;
}
h2 {
	font-size: 18px;
	line-height: 40px;
	font-weight: bold;
	margin-top: 0;
	margin-bottom: 0;
	}
h3 {
	font-size: 16px;
	line-height: 22px;
	font-weight: bold;
	margin-top: 0;
	margin-bottom: 0;
	}
h4 {
	font-size: 14px;
	line-height: 26px;
	font-weight: bold;
	margin-top: 0;
	margin-bottom: 0;
	}
h5 {
	font-size: 12px;
	line-height: 22px;
	font-weight: bold;
	margin-top: 0;
	margin-bottom: 0;
	}
h6 {
	font-size: 10px;
	line-height: 18px;
	font-weight: bold;
	margin-top: 0;
	margin-bottom: 0;
	}
img {
	border: 0;
	}
.nowrap {
	white-space: nowrap;
	font-size: 10px;
	font-weight: bold;
	margin-top: 0;
	margin-bottom: 0;
/* must be combined with nobr in html for ie5win */
	}
.tiny {
	font-size: 9px;
	line-height: 16px;
	margin-top: 15px;
	margin-bottom: 5px; 
	}
#sidebar {
	float: left;
	background-color: #222;
	color: #aaa;
	voice-family: "\"}\"";
	voice-family:inherit;
	border-right: 3px solid #777;
	}
html>body #sidebar {
	width: 12em;
	height: 7000px;
	}
#content {
	position: relative;
	padding: 10px 2% 10px 2%;
	margin: 20px 220px;
	background: #fff;
	border: 5px solid #777;
	voice-family: "\"}\"";
	voice-family:inherit;
	}
html>body #content {
	width: 70%;
	}

#cssmenu {
  position: fixed;
  background: #222;
  list-style: none;
  margin: 0;
  padding: 0;
  width: 12em;
}
#cssmenu li {
  font: 80% "Lucida Sans Unicode", "Bitstream Vera Sans", "Trebuchet Unicode MS", "Lucida Grande", Verdana, Helvetica, sans-serif;
  margin: 0;
  padding: 0;
  list-style: none;
 }
#cssmenu a {
  background: #333;
  border-bottom: 1px solid #393939;
  color: #ccc;
  display: block;
  margin: 0;
  padding: 8px 12px;
  text-decoration: none;
  font-weight: normal;
  border-left: 5px solid transparent;
}
#cssmenu a:hover {
  background-color: #2580a2;
  color: #fff;
  padding-bottom: 8px;
  border-left: 5px solid #055371;
}
.row {
  margin: 20px 0;
}
#titlebar{
	width: 100%;
	line-height: 1.5em;
	background-color: #055371;
	text-align: center;
	border-bottom: 2px solid #012f40; 
}
#titlebar > span{
	color: #ccc;
}
.subheading{
	color: #aaa;
	margin-bottom: -20px;
	padding-left: 210px;
}
img {
  vertical-align: middle;
  display: block;
  max-width: 500px;
  height: auto;
  border: 5px solid #777;
}
.half{
	color: #ccc;
	padding-left: 25px;
	width: 48%;
}
pre{
	background-color: #eee;
	padding: 5px;
	width: 650px;
	word-wrap: break-word;
}
.img-relativelayout-s{
	border: none;
	max-width: 120px;
	float: right;
}
.img-relativelayout-l{
	border: none;
	max-width: 200px;
	float: right;
	padding-left: 10px;
}
.img-relativelayout-l2{
	border: none;
	max-width: 200px;
	float: left;
	padding-right: 10px;

}
</style>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script>
$(function() {
  $('a[href*=#]:not([href=#])').click(function() {
    if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') && location.hostname == this.hostname) {
      var target = $(this.hash);
      target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
      if (target.length) {
        $('html,body').animate({
          scrollTop: target.offset().top
        }, 800);
        return false;
      }
    }
  });
});
</script>

<meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
</head>

<body>
<div id="titlebar">
<span>COMP 2021 Galaxy Wars SDL - Final Report</span>
</div>
<div id="sidebar">
<div id='cssmenu'>
<h1>Contents</h1>
<ul>
   <li><a href='#home'><span>Home</span></a></li>
   <li><a href='#bg'><span>Background</span></a></li>
   <li><a href='#gs'><span>Game Setting</span></a></li>
   <li><a href='#idea'><span>Idea Development</span></a></li>
   <li><a href='#move'><span>Movement</span></a></li>
   <li><a href='#colli'><span>Collision</span></a></li>
   <li><a href='#score'><span>Score Calculation</span></a></li>
   <li><a href='#difficult'><span>Difficulties and Possible Solutions</span></a></li>
   <li><a href='#future'><span>Future Development</span></a></li>
   <li><a href='#conclusion'><span>Conclusion</span></a></li>
</ul>
</div>
</div>

<div class="row">
<div class="heading" id="home">
Home
</div>
</div>

<div>
<table>
<tr>
<td class="content half">
<p>
Welcome to the Final Report page for COMP2021 Galaxy Wars SDL. Navigate by the sidebar on the left.
</p>
<p>
This project is curated by:
<ul>
<li>IYER, Arvind</li>
<li>MA, Jonathan Chuan-en</li>
<ul>
</p>
</td>
<td>
<img src="cover.png"></img>
</td>
</tr>
</table>
</div>

<div class="row">
<div class="heading" id="bg">
Background
</div>
</div>

<div id="content">
<p>
Perl is a highly versatile programming language with an extensive and active user base. Mainly targeted at text-processing, simple tasks and web-based activities, Perl has capabilities to handle way more than these. Nevertheless, multimedia based programming and game development does not seem to be common among Perl programmers. With Frozen-Bubble, an arcade game from 2002 being the one of the only largely recognized game made entirely in Perl, we decided to take up this challenge of increasing the implementation of this language in the vast field of Game Development. 
</p><p>
Being fans of the Star Wars franchise, games and programming, it only felt natural that the path to take was for us to program a game as a tribute to Star Wars. Taking hints of inspiration from popular games like Space Invaders and the more recent Geometry Wars, we decided to make a 2D space-craft shooter. 
</p>  
</div>

<div class="row">
<div class="heading" id="gs">
Game Setting
</div>
</div>

<div id="content">
<p>
Galaxy Wars is a one-person 2D shooting game set in the futuristic intergalactic empire. The player poses as the Empire's Standard Fighter pilot, who voyages deep into an unknown realm inhabited by alien species. A swarm of alien ships make their way towards a warp hole undiscovered by the Empire forces. It is the player who could hold off to from the last line of defence...
</p>
</div>

<div class="row">
<div class="heading" id="idea">
Idea Development
</div>
</div>

<h2 class="subheading">On the enemy...</h2>
<div id="content">
<p>
<img src="alien.png" class="img-relativelayout-s"></img>
Data structure for enemy:</p>
<pre>
my $enem = {
    sprite => SDLx::Sprite->new (
		width => $playersize+1,
		height => $playersize+1,
		image=>'alien_01.png' 
	),
    v_y    => 1,
    v_x	   => 0,
    shieldOn => 0,
    shield => SDLx::Sprite->new (
		width => $playersize+1,
		height => $playersize+1,
		image=>'alien_shield_01.png' 
	),
};
</pre>
<p>
In terms of graphics, the enemy ship has a streamlined body and greenish-blue highlights to indicate they use alien technology.</p>
<p>
In terms of game mechanics, the enemy ship is always moving towards the bottom of the screen (where the warp hole is) at a random speed, which will increase as the game continues.</p>
<p>
Below is the code snippet that controls the random movement of the enemy ship:</p>
<pre>
if(1 + int rand(300-5*(time-$start_time)) == 1)
{
	$inst->{sprite}->y( int($inst->{sprite}->y + ( $inst->{v_y} )) );
}
</pre>
<p>
Using the random function, the enemy ship's movement speed (indicated by the <i>v_y</i> element)  will vary according to every fream per second.
</p>

</div>
<h2 class="subheading">On the player...</h2>
<div id="content">
<p>
<img src="ship.png" class="img-relativelayout-s"></img>
<p>Data structure for player:</p>
<pre>
my $player = {
    ship => $playersprite,
    v_y    => 0,
    v_x	   => 0,
    score  => 0,
    energy => 100,
    lives  => 3,
    beamOn => 0
};
</pre>
</p>
</div>
<h2 class="subheading">On the weapon...</h2>
<div id="content">
<p>Data structure for gun:</p>
<pre>
my $player = {
    ship => $playersprite,
    v_y    => 0,
    v_x	   => 0,
    score  => 0,
    energy => 100,
    lives  => 3,
    beamOn => 0
};
</pre>
<p>Initialization of the gun:</p>
<pre>
my $gun_num = 0;
my @guns;
my $weapon_lvl = 0;
</pre>
<p>
<img src="gun.png" class="img-relativelayout-l"></img>
In terms of graphics, the weapon produces gunshots that are small rectangles generated from the object creation method in the <i>SDL::Sprite</i> module.</p>
<p>
In terms of game mechanics, the weapon is first initialized with a constant velocity and color. Once reached a certain score (refer to <a href="#score">Score Calculation</a> for details)</p>
<p>
<img src="beam.png" class="img-relativelayout-l2"></img>
Besides the regular gun shot weapon, the player ship is also equipped with a pulse laser beam that can last for about 5 seconds. The weapon is activated with the <i>b</i> keypress and this activation will exhaust 100 energy points. Any enemy that comes in contact with the beam will be destroyed immediately.</p>
<br><br><br><br>
<p>Below is the code snippet that detects the 5 second limit:</p>
<pre>
if($player->{beamOn} && $player->{beamTime} < 120 && $player->{energy}>99){
	$beam->draw_xy($app, $player->{ship}->x-28, $player->{ship}->y-620);
	$player->{beamTime}++;
}
else{
	if($player->{beamOn} && $player->{energy}>99){
		$player->{energy}-=100;
	}
	$player->{beamOn} = 0;
	$player->{beamTime} = 0;
}
</pre>
<p>
The condition check involves three rules, namely:<br>(i) If the beam is activated<br>(ii) If the beam is activated over 120 time units<br>(iii) If the player ship's energy levels are sufficient, passing the minimum of 100 energy points
</p>
<p>
On every frame, the player <i>beamTime</i> element will increment by 1. Since the frame per second is set as 24, the <i>beamTime</i>  element will increment roughly per second.</p>
</div>

<div class="row">
<div class="heading" id="move">
Movement
</div>
</div>

<div id="content">
<p>
For movement of the player, we use a simple system where input from the arrow keys on the keyboard sets a velocity to the player's ship according to the buttons that were pressed.</p>
<p>On the other hand, the movement of enemy ships is made to be slightly unpredictable by adding in a random velocity factor which makes sure that the velocity keeps changing. This increases the difficulty while also making the game less predictable. 
</p>
</div>

<div class="row">
<div class="heading" id="colli">
Collision
</div>
</div>

<div id="content">
<p>
<img src="colli.png" class="img-relativelayout-s"></img>
Collision between sprites was handled by implementing simple Euclidean geometry. We find the distance between the position of one object and another and this distance factor depends on the type of colliding object.</p>
<p>
We can categorize these as:
</p>
<p>(i) Player - Enemy<br>
(ii) Enemy - Bullet<br>
(iii) Enemy - Beam
</p> 
</div>

<div class="row">
<div class="heading" id="score">
Score Calculation
</div>
</div>

<div id="content">
<p>
For killing every normal opponent (without shield), the player gets <span style="color: #009933;font-weight: bold;">+10</span> points. Breaking a fortified opponent's shield awards the player <span style="color: #009933;font-weight: bold;">+10</span> points as well. Killing a fortified opponent awards the player <span style="color: #009933;font-weight: bold;">+50</span> points. Allowing an enemy to pass the base of the screen results in <span style="color: #ff0000;font-weight: bold;">-10</span> points. 
</p>
</div>

<div class="row">
<div class="heading" id="difficult">
Difficulties and Possible Solutions
</div>
</div>

<h2 class="subheading">Memory Management</h2>
<div id="content">
<p>
The most unsurmountable problem is the memory management and lagging problem in Galaxy Wars SDL. If the game is played for long periods of time, we face serious framerate issues. This has been constantly improved over the development timeframe, but is still unsatisfactory. Explicit garbage collection in Perl is not well made as it is mostly made automatic. However SDL objects do not seem to follow the automatic garbage collection and an alternative will be necessary.
</p>
</div>

<h2 class="subheading">Enemy AI</h2>
<div id="content">
<p>
Enemy Artificial Intelligence is a technical difficulty we encounter. We planned on giving the enemies and AI that makes them follow the player and avoid each other in smooth paths, but we found this was too difficult to implement in the given development period. 
</p>
</div>

<div class="row">
<div class="heading" id="future">
Future Development
</div>
</div>

<h2 class="subheading">Progressive Difficulty Accumulation</h2>
<div id="content">
xxx
</div>

<h2 class="subheading">Random Power-up Spawning</h2>
<div id="content">
<p>
Currently the game emplyes auto-increment of weapon upgrade (as described in <a href="#idea">Idea Development</a>). This method is easy to attain and the player satisfaction is not promoted as much. If we employ a power-up spawning, the players would need to put more effort to upgrade their weapons. The power-ups can also enable us to develop more varieties of weapons and of the ways to destroy enemies. For example, some power-ups could increase the energy points while some could decrease the number of enemy ships in the next spawn.
</p>
</div>

<h2 class="subheading">And More...</h2>
<div id="content">
<p>
Galaxy Wars has a nearly infinite scope for improvements. We could add new levels, new enemies, different weapons, powerups and even player customization. Instead of simply sticking to a vertical up down movement of ships, we hope to further develop a gamefield that permits 360 degree rotation allowing the player to shoot at enemies coming from any direction. In the future, even a multiplayer or co-operative form of this game does not seem outlandish and we wish we can make this happen. 
</p>
</div>

<div class="row">
<div class="heading" id="conclusion">
Conclusion
</div>
</div>

<div>
<table>
<tr>
<td class="content half">
<p>
All in all, developing Galaxy Wars was not an easy path to follow, especially we have to pick-up a new development framework----SDL within a short period of time.</p>
<p>Nevertheless, creating this game has brought great satisfaction to us, and that, not only we had enjoyed the process of realizing game ideas into reality, but also fixing problems and improving our code. This course has provided ample freedom for us, students, to devise our own little projects. We hope we can work together again and achieve great things ahead.
</p>
</td>
<td>
<img src="home.png"></img>
</td>
</tr>
</table>
</div>

<div class="row">
<div id="titlebar">
<span>Project created by Arvind and Jonathan. Spring 2015 @HKUST.</span>
</div>
</div>
</body>
</html>

